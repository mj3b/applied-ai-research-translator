{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "claims.schema.json",
  "title": "Claims",
  "type": "object",
  "additionalProperties": false,
  "required": ["claims_version", "pack_id", "created_at", "source", "claims"],
  "properties": {
    "claims_version": { "type": "string" },
    "pack_id": { "type": "string" },
    "created_at": { "type": "string" },
    "source": {
      "type": "object",
      "additionalProperties": false,
      "required": ["paper_text_path", "method"],
      "properties": {
        "paper_text_path": { "type": "string" },
        "method": { "type": "string" },
        "notes": { "type": "string" }
      }
    },
    "claims": {
      "type": "array",
      "minItems": 1,
      "items": { "$ref": "#/$defs/claim" }
    }
  },
  "$defs": {
    "claim": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "claim_id",
        "claim_type",
        "claim_text",
        "operationalization",
        "testability",
        "dependencies",
        "evidence"
      ],
      "properties": {
        "claim_id": { "type": "string" },
        "claim_type": {
          "type": "string",
          "enum": ["performance", "method", "safety", "cost_latency", "reliability", "measurement", "other"]
        },
        "claim_text": { "type": "string" },
        "operationalization": {
          "type": "object",
          "additionalProperties": false,
          "required": ["task", "inputs", "outputs", "metric"],
          "properties": {
            "task": { "type": "string" },
            "inputs": { "type": "array", "items": { "type": "string" } },
            "outputs": { "type": "array", "items": { "type": "string" } },
            "metric": { "type": "string" }
          }
        },
        "testability": {
          "type": "object",
          "additionalProperties": false,
          "required": ["level", "eval_hint", "failure_modes"],
          "properties": {
            "level": { "type": "string", "enum": ["high", "medium", "low"] },
            "eval_hint": { "type": "string" },
            "failure_modes": { "type": "array", "items": { "type": "string" } }
          }
        },
        "dependencies": { "type": "array", "items": { "type": "string" } },
        "evidence": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "additionalProperties": false,
            "required": ["source", "quote", "location_hint"],
            "properties": {
              "source": { "type": "string", "enum": ["paper_text"] },
              "quote": { "type": "string" },
              "location_hint": { "type": "string" }
            }
          }
        }
      }
    }
  }
}
